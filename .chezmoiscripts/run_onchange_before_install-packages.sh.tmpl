{{ if eq .osid "linux-debian" "linux-raspbian" "linux-ubuntu" -}}

{{ $packages := list
     "bat"
     "build-essential"
     "curl"
     "git"
     "openssh-server"
     "ripgrep"
     "zsh" -}}

{{ $cargo_packages := list
     "zoxide"
     "rm-improved"
     "eza" -}}

{{ $sudo := "sudo " -}}
{{ if eq .chezmoi.username "root" -}}
{{   $sudo = "" -}}
{{ end -}}

#! /bin/bash

set -eufo pipefail

{{ $sudo }}apt-get update
{{ $sudo }}apt-get install -y {{ $packages | join " " }}

cargo install {{ $cargo_packages | join " " }}

{{ end -}}
